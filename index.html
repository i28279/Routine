<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Study Routine Planner</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #e0e0e0;
      padding: 20px;
    }
    h1 { text-align:center; margin-bottom:20px; }
    table { width:100%; border-collapse:collapse; margin-top:20px; }
    th, td { border:1px solid #ccc; padding:8px; text-align:center; }
    th { background:#333; color:#fff; }
    button {
      padding:5px 10px;
      border:none;
      border-radius:12px;
      background:#e0e0e0;
      box-shadow: 4px 4px 8px #bebebe, -4px -4px 8px #ffffff;
      cursor:pointer;
      transition: all 0.2s;
    }
    button:active {
      box-shadow: inset 4px 4px 8px #bebebe, inset -4px -4px 8px #ffffff;
    }
    #progress, #countdown, #dailyTarget {
      margin-top:15px; 
      font-weight:bold;
      text-align:center;
      padding:10px;
      border-radius:12px;
      background:#e0e0e0;
      box-shadow: 8px 8px 16px #bebebe, -8px -8px 16px #ffffff;
    }
    input[type="date"] {
      padding:5px;
      border-radius:12px;
      border:none;
      box-shadow: inset 4px 4px 8px #bebebe, inset -4px -4px 8px #ffffff;
    }
  </style>
</head>
<body>
  <h1>ðŸ“š Study Routine Planner</h1>

  <label>ðŸ“… Select End Date: </label>
  <input type="date" id="endDate" onchange="saveEndDate()">

  <div id="progress">Completed: 0 / 44 chapters</div>
  <div id="dailyTarget">Daily Target: -- chapters/day</div>
  <div id="countdown">Countdown: -- days left</div>

  <table>
    <thead>
      <tr>
        <th>Day</th>
        <th>Chapter Name</th>
        <th>Done</th>
      </tr>
    </thead>
    <tbody id="routineTable"></tbody>
  </table>

  <script>
    const easy = [
      "à¦­à§Œà¦¤ à¦œà¦—à§Ž","à¦†à¦¦à¦°à§à¦¶ à¦—à§à¦¯à¦¾à¦¸","à¦¸à¦°à¦² à¦¦à§‹à¦²à¦¨ à¦—à¦¤à¦¿","à¦…à¦­à¦¿à¦•à¦°à§à¦·","à¦¬à¦² à¦“ à¦˜à¦°à§à¦·à¦£","à¦¶à¦¿à¦¶à¦¿à¦°à¦¾à¦™à§à¦•/à¦†à¦¦à§à¦°à¦¤à¦¾",
      "à¦¹à¦¾à¦‰à¦œ à¦“à§Ÿà¦¾à¦°à¦¿à¦‚","à¦¬à§ˆà¦¦à§à¦¯à§à¦¤à¦¿à¦• à¦¨à¦¿à§Ÿà¦¨à§à¦¤à§à¦°à¦•","à¦¬à§ˆà¦¦à§à¦¯à§à¦¤à¦¿à¦• à¦¤à¦¾à¦° à¦“ à¦•à§à¦¯à¦¾à¦¬à¦²","à¦¬à§ˆà¦¦à§à¦¯à§à¦¤à¦¿à¦• à¦°à¦•à§à¦·à¦£",
      "à¦¬à§ˆà¦¦à§à¦¯à§à¦¤à¦¿à¦• à¦†à¦°à§à¦¥à¦¿à¦‚","à¦†à¦§à§à¦¨à¦¿à¦• à¦¬à§ˆà¦¦à§à¦¯à§à¦¤à¦¿à¦• à¦¬à¦¾à¦¤à¦¿","à¦‡à¦²à§‡à¦Ÿà§à¦°à§‹à¦®à§‡à¦—à¦¨à§‡à¦Ÿà¦¿à¦œà¦®","à¦‡à¦²à§‡à¦•à§à¦Ÿà§à¦°à§‹à¦®à§à¦¯à¦¾à¦—à¦¨à§‡à¦Ÿà¦¿à¦• à¦‡à¦¨à¦¡à¦¾à¦•à¦¶à¦¨",
      "à¦¨à¦¿à¦°à§à¦£à¦¾à§Ÿà¦•","à¦®à§à¦¯à¦¾à¦Ÿà§à¦°à¦¿à¦•à§à¦¸","à¦œà¦Ÿà¦¿à¦² à¦¸à¦‚à¦–à§à¦¯à¦¾","à¦¸à¦°à¦²à¦°à§‡à¦–à¦¾","à¦¬à§ƒà¦¤à§à¦¤","à¦¦à§ˆà¦°à§à¦˜à§à¦¯ à¦à¦¬à¦‚ à¦•à§à¦·à§‡à¦¤à§à¦°à¦«à¦²"
    ];
    const hard = [
      "à¦­à§‡à¦•à§à¦Ÿà¦°","à¦—à¦¤à¦¿ à¦“ à¦—à¦¤à¦¿à¦° à¦¸à¦®à§€à¦•à¦°à¦£","à¦•à¦¾à¦œ à¦•à§à¦·à¦®à¦¤à¦¾ à¦“ à¦¶à¦•à§à¦¤à¦¿","à¦¬à§ƒà¦¤à§à¦¤à¦¾à¦•à¦¾à¦° à¦—à¦¤à¦¿","à¦¸à§à¦¥à¦¿à¦¤à¦¿à¦¸à§à¦¥à¦¾à¦ªà¦•à¦¤à¦¾","à¦ªà§ƒà¦·à§à¦ à¦Ÿà¦¾à¦¨ à¦“ à¦¸à¦¾à¦¨à§à¦¦à§à¦°à¦¤à¦¾",
      "à¦¤à¦°à¦™à§à¦—","à¦¶à¦¬à§à¦¦ à¦“ à¦¶à¦¬à§à¦¦à§‡à¦° à¦¬à§‡à¦—","à¦šà¦¾à¦ª à¦“ à¦šà¦¾à¦ªà§‡à¦° à¦¬à§ˆà¦¶à¦¿à¦·à§à¦Ÿà§à¦¯","à¦¬à§ˆà¦¦à§à¦¯à§à¦¤à¦¿à¦• à¦•à§à¦·à¦®à¦¤à¦¾","à¦¬à§ˆà¦¦à§à¦¯à§à¦¤à¦¿ à¦¬à¦°à§à¦¤à¦¨à§€","à¦“à¦¹à¦®à§‡à¦° à¦¸à§‚à¦¤à§à¦°",
      "à¦•à§à¦¯à¦¾à¦ªà¦¾à¦¸à¦¿à¦Ÿà¦°","à¦ªà¦°à¦¿à¦¬à¦¾à¦¹à§€","à¦‡à¦²à§‡à¦•à§à¦Ÿà§à¦°à¦¿à¦¸à¦¿à¦Ÿà¦¿ à¦à¦° à¦ªà§à¦°à¦•à§ƒà¦¤à¦¿","à¦¬à¦¹à§à¦ªà¦¦à§€","à¦¬à¦¿à¦¨à§à¦¯à¦¾à¦¸","à¦¸à¦®à¦¾à¦¬à§‡à¦¶","à¦¸à¦‚à¦¯à§à¦•à§à¦¤ à¦•à§‹à¦£","à¦¤à§à¦°à¦¿à¦•à§‹à¦£à¦®à¦¿à¦¤à¦¿",
      "à¦°à§‚à¦ªà¦¾à¦¨à§à¦¤à¦° à¦¸à§‚à¦¤à§à¦°","à¦—à§à¦£à¦¿à¦¤à¦• à¦•à¦¾à¦£","à¦¬à¦¿à¦ªà¦°à§€à¦¤ à¦¬à§ƒà¦¤à§à¦¤à§€à§Ÿ à¦«à¦¾à¦‚à¦¶à¦¨","à¦¤à§à¦°à¦¿à¦­à§à¦œà§‡à¦° à¦¤à§à¦°à¦¿à¦•à§‹à¦£à¦®à¦¿à¦¤à¦¿"
    ];

    const chapters = [...easy, ...hard];
    const totalChapters = chapters.length;

    let completedChapters = JSON.parse(localStorage.getItem("completedChapters")) || [];

    const tbody = document.getElementById("routineTable");

    // à¦Ÿà§‡à¦¬à¦¿à¦² à¦œà§‡à¦¨à¦¾à¦°à§‡à¦Ÿ
    chapters.forEach((ch, i) => {
      const tr = document.createElement("tr");
      const doneBtn = completedChapters.includes(i) 
                      ? `<button disabled>âœ”</button>` 
                      : `<button onclick="markDone(${i}, this)">Done</button>`;
      tr.innerHTML = `
        <td>Day ${i+1}</td>
        <td>${ch}</td>
        <td>${doneBtn}</td>
      `;
      tbody.appendChild(tr);
    });

    updateProgressDisplay();

    function markDone(index, btn){
      btn.disabled = true;
      btn.innerText = "âœ”";
      if(!completedChapters.includes(index)){
        completedChapters.push(index);
        localStorage.setItem("completedChapters", JSON.stringify(completedChapters));
      }
      updateProgressDisplay();
    }

    function updateProgressDisplay(){
      document.getElementById("progress").innerText = `Completed: ${completedChapters.length} / ${totalChapters} chapters`;
      updateDailyTarget();
    }

    function updateDailyTarget(){
      const endDateValue = document.getElementById("endDate").value;
      if(!endDateValue) return;
      const endDate = new Date(endDateValue + "T23:59:59");
      const now = new Date();
      const diffTime = endDate - now;
      const diffDays = Math.ceil(diffTime / (1000*60*60*24));
      const dailyTarget = diffDays > 0 ? (totalChapters - completedChapters.length) / diffDays : 0;
      document.getElementById("dailyTarget").innerText = `Daily Target: ${dailyTarget.toFixed(2)} chapters/day`;
    }

    let countdownInterval;
    function startCountdown(){
      clearInterval(countdownInterval);
      const endDateValue = document.getElementById("endDate").value;
      if(!endDateValue) return;

      const endDate = new Date(endDateValue + "T23:59:59");

      countdownInterval = setInterval(() => {
        const now = new Date();
        const diff = endDate - now;

        if(diff <= 0){
          clearInterval(countdownInterval);
          document.getElementById("countdown").innerText = `Countdown: 0d 0h 0m 0s`;
          return;
        }

        const days = Math.floor(diff / (1000*60*60*24));
        const hours = Math.floor((diff % (1000*60*60*24)) / (1000*60*60));
        const minutes = Math.floor((diff % (1000*60*60)) / (1000*60));
        const seconds = Math.floor((diff % (1000*60)) / 1000);

        document.getElementById("countdown").innerText =
          `Countdown: ${days}d ${hours}h ${minutes}m ${seconds}s`;

        updateDailyTarget();
      }, 1000);
    }

    function saveEndDate(){
      const value = document.getElementById("endDate").value;
      localStorage.setItem("endDate", value);
      startCountdown();
    }

    // page load à¦ saved end date à¦¥à¦¾à¦•à¦²à§‡ auto set à¦à¦¬à¦‚ countdown start
    window.addEventListener("load", () => {
      const savedEndDate = localStorage.getItem("endDate");
      if(savedEndDate){
        document.getElementById("endDate").value = savedEndDate;
        startCountdown();
      }
    });
  </script>
</body>
</html>
